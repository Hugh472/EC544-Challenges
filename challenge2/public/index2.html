<!DOCTYPE html>
<html>
  <head>
    <title>Challenge 2 - Group 10</title>
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <link href="/c3.css" rel="stylesheet" type="text/css">
    <script src="/d3.min.js" charset="utf-8"></script>
    <script src="/c3.min.js"></script>
    <script src="/jquery-3.1.1.min.js"></script>
    <!-- <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script> -->
    <!-- <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.2.2/d3.v3.min.js"></script> -->
    <!-- <script type="text/javascript" src="/canvasjs.min.js"></script> -->
  </head>
  <body>

    <!-- We can insert here the different buttons we will use to change the charts -->
    <!--<input type="button" value="We don't need this for now :)" onclick="loadPoints();"></input> -->
    <div id="historicalChart" style="height: 300px; width: 100%;">
    </div>
    <script>
      var xbees = [];

      var chart = c3.generate({
        bindto: '#historicalChart',
        data: {
            columns: [],
            type: 'bar'
        },
        bar: {
          width: {
            ratio: 0.5
          }
        },
        axis: {
          x: {
            label: {text: 'Time',}
          },
          y: {
            label: {text: 'Temperature'}
          }
        }
      });
      function loadPoints()
      {
        // Use jQuery to load the JSON data from the node server
        $.getJSON("/historical/X2", function(json_data) {
          // Successfully loaded some JSON data
          chart.load(json_data);
        });
      }

      function loadXbeeList()
      {
        $.getJSON("/xbees", function(json_data) {
          xbees = json_data.names;
          loadPoints();
        });
      }
      
      loadXbeeList();

    </script>
  </body>
</html>
